!function(e,n){"use strict";"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.viewportUnitsBuggyfill=n()}(this,function(){"use strict";function e(e,n){var t;return function(){var i=this,r=arguments,o=function(){e.apply(i,r)};clearTimeout(t),t=setTimeout(o,n)}}function n(){try{return window.self!==window.top}catch(e){return!0}}function t(t){if(!v){if(t===!0&&(t={force:!0}),w=t||{},w.isMobileSafari=R,w.isBadStockAndroid=M,w.isTencentX5=O,!(!E&&(w.force||O||R||k||M||A||w.hacks&&w.hacks.required(w))))return window.console&&E&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};w.hacks&&w.hacks.initialize(w),v=!0,b=document.createElement("style"),b.id="patched-viewport",document.head.appendChild(b),l(function(){var t=e(r,w.refreshDebounceWait||100);window.addEventListener("orientationchange",t,!0),window.addEventListener("pageshow",t,!0),(w.force||k||n())&&(window.addEventListener("resize",t,!0),w._listeningToResize=!0),w.hacks&&w.hacks.initializeEvents(w,r,t),r()})}}function i(){b.textContent=s(),b.parentNode.appendChild(b)}function r(){v&&(o(),setTimeout(function(){i()},1))}function o(){return T=[],y.call(document.styleSheets,function(e){"patched-viewport"!==e.ownerNode.id&&e.cssRules&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches||y.call(e.cssRules,a))}),T}function a(e){if(7===e.type){var n;try{n=e.cssText}catch(t){return}return g.lastIndex=0,void(g.test(n)&&(T.push([e,null,n]),w.hacks&&w.hacks.findDeclarations(T,e,null,n)))}if(!e.style){if(!e.cssRules)return;return void y.call(e.cssRules,function(e){a(e)})}y.call(e.style,function(n){var t=e.style.getPropertyValue(n);e.style.getPropertyPriority(n)&&(t+=" !important"),g.lastIndex=0,g.test(t)&&(T.push([e,n,t]),w.hacks&&w.hacks.findDeclarations(T,e,n,t))})}function s(){x=d();var e=[],n=[],t,i;return T.forEach(function(r){var o=u.apply(null,r),a=o.selector.length?o.selector.join(" {\n")+" {\n":"",s=new Array(o.selector.length+1).join("\n}");return a&&a===t?(a&&!t&&(t=a,i=s),void n.push(o.content)):(n.length&&(e.push(t+n.join("\n")+i),n.length=0),void(a?(t=a,i=s,n.push(o.content)):(e.push(o.content),t=null,i=null)))}),n.length&&e.push(t+n.join("\n")+i),A&&e.push("* { content: normal !important; }"),e.join("\n\n")}function u(e,n,t){var i,r=[];i=t.replace(g,c),w.hacks&&(i=w.hacks.overwriteDeclaration(e,n,i)),n&&(r.push(e.selectorText),i=n+": "+i+";");for(var o=e.parentRule;o;)r.unshift("@media "+o.media.mediaText),o=o.parentRule;return{selector:r,content:i}}function c(e,n,t){var i=x[t],r=parseFloat(n)/100;return r*i+"px"}function d(){var e=window.innerHeight,n=window.innerWidth;return{vh:e,vw:n,vmax:Math.max(n,e),vmin:Math.min(n,e)}}function l(e){var n=0,t=function(){n--,n||e()};y.call(document.styleSheets,function(e){e.href&&f(e.href)!==f(location.href)&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(n++,h(e.ownerNode,t))}),n||e()}function f(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function h(e,n){p(e.href,function(){var t=document.createElement("style");t.media=e.media,t.setAttribute("data-href",e.href),t.textContent=this.responseText,e.parentNode.replaceChild(t,e),n()},n)}function p(e,n,t){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");i=new XDomainRequest,i.open("GET",e)}return i.onload=n,i.onerror=t,i.send(),i}var v=!1,w,m=window.navigator.userAgent,g=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,y=[].forEach,x,T,b,k=!1,E=!1,A=m.indexOf("Opera Mini")>-1,R=/(iPhone|iPod|iPad).+AppleWebKit/i.test(m)&&function(){var e=m.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<8}(),M=function(){var e=m.indexOf(" Android ")>-1;if(!e)return!1;var n=m.indexOf("Version/")>-1;if(!n)return!1;var t=parseFloat((m.match("Android ([0-9.]+)")||[])[1]);return 4.4>=t}(),O=function(){return navigator.userAgent.indexOf("MQQBrowser")>-1?!0:!1}();/*@cc_on

  @if (9 <= @_jscript_version && @_jscript_version <= 10)
    isBuggyIE = true;
  @end
  
  @if (@_jscript_version < 9) {
    isOldIE = true;
  }
  @end
  
  @*/
return k||(k=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.3",findProperties:o,getCss:s,init:t,refresh:r}});